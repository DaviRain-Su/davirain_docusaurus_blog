# æ·»åŠ å¯ä¿¡èŠ‚ç‚¹

æœ¬æ•™ç¨‹è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ä¸€ç»„ç§æœ‰éªŒè¯å™¨æ¥å¯åŠ¨ä¸€ä¸ªå°å‹çš„ç‹¬ç«‹åŒºå—é“¾ç½‘ç»œã€‚

æ­£å¦‚æ‚¨åœ¨åŒºå—é“¾åŸºç¡€çŸ¥è¯†ä¸­æ‰€äº†è§£çš„ï¼Œæ‰€æœ‰åŒºå—é“¾éƒ½è¦æ±‚ç½‘ç»œä¸­çš„èŠ‚ç‚¹åœ¨ä»»ä½•ç‰¹å®šæ—¶é—´ç‚¹å°±æ•°æ®çŠ¶æ€è¾¾æˆä¸€è‡´ï¼Œè¿™ç§å…³äºçŠ¶æ€çš„ä¸€è‡´ç§°ä¸ºå…±è¯†ã€‚

Substrate èŠ‚ç‚¹æ¨¡æ¿ä½¿ç”¨æƒå¨è¯æ˜å…±è¯†æ¨¡å‹ï¼Œä¹Ÿç§°ä¸ºæƒå¨è½®æˆ–Auraå…±è¯†ã€‚Aura å…±è¯†åè®®å°†åŒºå—ç”Ÿäº§é™åˆ¶åœ¨æˆæƒè´¦æˆ·çš„è½®æ¢åˆ—è¡¨ä¸­ã€‚æˆæƒè´¦æˆ·â€”â€”æƒå¨â€”â€”ä»¥å¾ªç¯æ–¹å¼åˆ›å»ºå—ï¼Œé€šå¸¸è¢«è®¤ä¸ºæ˜¯ç½‘ç»œä¸­å—ä¿¡ä»»çš„å‚ä¸è€…ã€‚

è¿™ç§å…±è¯†æ¨¡å‹æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥ä¸ºæœ‰é™æ•°é‡çš„å‚ä¸è€…å¯åŠ¨å•ç‹¬çš„åŒºå—é“¾ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä½•ç”ŸæˆæˆæƒèŠ‚ç‚¹å‚ä¸ç½‘ç»œæ‰€éœ€çš„å¯†é’¥ï¼Œå¦‚ä½•é…ç½®å’Œä¸å…¶ä»–æˆæƒå¸æˆ·å…±äº«æœ‰å…³ç½‘ç»œçš„ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä¸€ç»„ç»è¿‡æ‰¹å‡†çš„éªŒè¯å™¨å¯åŠ¨ç½‘ç»œ.

## åœ¨ä½ å¼€å§‹ä¹‹å‰

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

- é€šè¿‡å®‰è£…Rust å’Œ Rust å·¥å…·é“¾ï¼Œæ‚¨å·²ç»ä¸º Substrate å¼€å‘é…ç½®äº†ç¯å¢ƒã€‚
- æ‚¨å·²å®Œæˆæ„å»ºæœ¬åœ°åŒºå—é“¾å¹¶åœ¨æœ¬åœ°å®‰è£…äº† Substrate èŠ‚ç‚¹æ¨¡æ¿ã€‚
- æ‚¨å·²ä½¿ç”¨æ¨¡æ‹Ÿç½‘ç»œä¸­æ‰€è¿°çš„é¢„å®šä¹‰å¸æˆ·åœ¨å•å°è®¡ç®—æœºä¸Šå¯åŠ¨èŠ‚ç‚¹ã€‚
- æ‚¨é€šå¸¸ç†Ÿæ‚‰è½¯ä»¶å¼€å‘å’Œä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢ã€‚
- æ‚¨é€šå¸¸ç†Ÿæ‚‰åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦å¹³å°ã€‚
 
## æ•™ç¨‹ç›®æ ‡

é€šè¿‡å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨å°†å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š

- ç”Ÿæˆç”¨ä½œç½‘ç»œæˆæƒçš„å¯†é’¥å¯¹ã€‚
- åˆ›å»ºè‡ªå®šä¹‰é“¾è§„èŒƒæ–‡ä»¶ã€‚
- å¯åŠ¨ä¸€ä¸ªç§æœ‰çš„ä¸¤èŠ‚ç‚¹åŒºå—é“¾ç½‘ç»œã€‚

### ç”Ÿæˆæ‚¨çš„å¸æˆ·å’Œå¯†é’¥
  
åœ¨[æ¨¡æ‹Ÿç½‘ç»œ](./simulate-network.md)ä¸­ï¼Œæ‚¨ä½¿ç”¨é¢„å®šä¹‰çš„å¸æˆ·å’Œå¯†é’¥å¯åŠ¨äº†å¯¹ç­‰èŠ‚ç‚¹ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä¸ºç½‘ç»œä¸­çš„éªŒè¯å™¨èŠ‚ç‚¹ç”Ÿæˆè‡ªå·±çš„å¯†é’¥ã€‚é‡è¦çš„æ˜¯è¦è®°ä½ï¼ŒåŒºå—é“¾ç½‘ç»œä¸­çš„æ¯ä¸ªå‚ä¸è€…éƒ½è´Ÿè´£ç”Ÿæˆå”¯ä¸€çš„å¯†é’¥ã€‚

### å¯†é’¥ç”Ÿæˆé€‰é¡¹

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ç”Ÿæˆå¯†é’¥ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`node-template`å­å‘½ä»¤ã€ç‹¬ç«‹çš„å­å¯†é’¥å‘½ä»¤è¡Œç¨‹åºã€`Polkadot-JS` åº”ç”¨ç¨‹åºæˆ–ç¬¬ä¸‰æ–¹å¯†é’¥ç”Ÿæˆå®ç”¨ç¨‹åºæ¥ç”Ÿæˆå¯†é’¥å¯¹ã€‚

å°½ç®¡æ‚¨å¯ä»¥ä½¿ç”¨é¢„å®šä¹‰çš„å¯†é’¥å¯¹æ¥å®Œæˆæœ¬æ•™ç¨‹ï¼Œä½†æ‚¨æ°¸è¿œä¸ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™äº›å¯†é’¥ã€‚æœ¬æ•™ç¨‹ä¸ä½¿ç”¨é¢„å®šä¹‰çš„å¯†é’¥æˆ–æ›´å®‰å…¨çš„`subkey`ç¨‹åºï¼Œè€Œæ˜¯è¯´æ˜å¦‚ä½•ä½¿ç”¨ `Substrate` èŠ‚ç‚¹æ¨¡æ¿å’Œkeyå­å‘½ä»¤ç”Ÿæˆå¯†é’¥ã€‚

### ä½¿ç”¨èŠ‚ç‚¹æ¨¡æ¿ç”Ÿæˆæœ¬åœ°å¯†é’¥

ä½œä¸ºæœ€ä½³å®è·µï¼Œå½“æ‚¨ä¸ºç”Ÿäº§åŒºå—é“¾ç”Ÿæˆå¯†é’¥æ—¶ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ä»æœªè¿æ¥åˆ°äº’è”ç½‘çš„æ°”éš™è®¡ç®—æœºã€‚è‡³å°‘ï¼Œåœ¨ç”Ÿæˆä»»ä½•æ‰“ç®—åœ¨ä¸å—æ‚¨æ§åˆ¶çš„å…¬å…±æˆ–ç§æœ‰åŒºå—é“¾ä¸Šä½¿ç”¨çš„å¯†é’¥ä¹‹å‰ï¼Œæ‚¨åº”è¯¥æ–­å¼€äº’è”ç½‘è¿æ¥ã€‚

ä½†æ˜¯ï¼Œå¯¹äºæœ¬æ•™ç¨‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`node-template`å‘½ä»¤è¡Œé€‰é¡¹åœ¨æœ¬åœ°ç”Ÿæˆéšæœºå¯†é’¥å¹¶ä¿æŒä¸ Internet çš„è¿æ¥ã€‚

è¦ä½¿ç”¨èŠ‚ç‚¹æ¨¡æ¿ç”Ÿæˆå¯†é’¥ï¼š

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯å¤–å£³ã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ `Substrate` èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆéšæœºå¯†é’¥çŸ­è¯­å’Œå¯†é’¥ï¼š

```shell
./target/release/node-template key generate --scheme Sr25519 --password-interactive
```

4. ä¸ºç”Ÿæˆçš„å¯†é’¥é”®å…¥å¯†ç ã€‚

è¯¥å‘½ä»¤ç”Ÿæˆå¯†é’¥å¹¶æ˜¾ç¤ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š

```shell
Secret phrase:  pig giraffe ceiling enter weird liar orange decline behind total despair fly
Secret seed:       0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f
Public key (hex):  0x1a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
Account ID:        0x1a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
Public key (SS58): 5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW
SS58 Address:      5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW
```

`aura`æ‚¨ç°åœ¨æ‹¥æœ‰ç”¨äºç”Ÿæˆç”¨äºä¸€ä¸ªèŠ‚ç‚¹çš„å—çš„ `Sr25519` å¯†é’¥ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¸æˆ·çš„ `Sr25519` å…¬é’¥æ˜¯`5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW`ã€‚

5. ä½¿ç”¨æ‚¨åˆšåˆšç”Ÿæˆçš„å¸æˆ·çš„å¯†ç çŸ­è¯­ä½¿ç”¨ Ed25519 ç­¾åæ–¹æ¡ˆæ´¾ç”Ÿå¯†é’¥ã€‚

ä¾‹å¦‚ï¼Œè¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤ï¼š

```shell
./target/release/node-template key inspect --password-interactive --scheme Ed25519 "pig giraffe ceiling enter weird liar orange decline behind total despair fly"
```

6. é”®å…¥ç”¨äºç”Ÿæˆå¯†é’¥çš„å¯†ç ã€‚

è¯¥å‘½ä»¤æ˜¾ç¤ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š

```shell
Secret phrase `pig giraffe ceiling enter weird liar orange decline behind total despair fly` is account:
Secret seed:       0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f
Public key (hex):  0x2577ba03f47cdbea161851d737e41200e471cd7a31a5c88242a527837efc1e7b
Public key (SS58): 5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN
Account ID:        0x2577ba03f47cdbea161851d737e41200e471cd7a31a5c88242a527837efc1e7b
SS58 Address:      5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN
```

æ‚¨ç°åœ¨æ‹¥æœ‰ `Ed25519` å¯†é’¥ï¼Œç”¨äºå®Œæˆ`grandpa`ç”¨äºä¸€ä¸ªèŠ‚ç‚¹çš„å—ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¸æˆ·çš„ `Ed25519` å…¬é’¥æ˜¯`5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN`.

### ç”Ÿæˆç¬¬äºŒç»„å¯†é’¥

å¯¹äºæœ¬æ•™ç¨‹ï¼Œä¸“ç”¨ç½‘ç»œä»…åŒ…å«ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤æ‚¨éœ€è¦ä¸¤ç»„å¯†é’¥ã€‚æ‚¨æœ‰å‡ ä¸ªé€‰é¡¹å¯ä»¥ç»§ç»­æœ¬æ•™ç¨‹ï¼š

- æ‚¨å¯ä»¥å°†å¯†é’¥ç”¨äºé¢„å®šä¹‰å¸æˆ·ä¹‹ä¸€ã€‚
- æ‚¨å¯ä»¥ä½¿ç”¨æœ¬åœ°è®¡ç®—æœºä¸Šçš„ä¸åŒèº«ä»½é‡å¤ä¸Šä¸€èŠ‚ä¸­çš„æ­¥éª¤ï¼Œä»¥ç”Ÿæˆç¬¬äºŒä¸ªå¯†é’¥å¯¹ã€‚
- æ‚¨å¯ä»¥æ´¾ç”Ÿä¸€ä¸ªå­å¯†é’¥å¯¹æ¥æ¨¡æ‹Ÿæœ¬åœ°è®¡ç®—æœºä¸Šçš„ç¬¬äºŒä¸ªèº«ä»½ã€‚
- æ‚¨å¯ä»¥æ‹›å‹Ÿå…¶ä»–å‚ä¸è€…æ¥ç”ŸæˆåŠ å…¥æ‚¨çš„ç§æœ‰ç½‘ç»œæ‰€éœ€çš„å¯†é’¥ã€‚
  
å‡ºäºè¯´æ˜ç›®çš„ï¼Œæœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„ç¬¬äºŒç»„é”®æ˜¯ï¼š

- `Sr25519`ï¼š`5EJPj83tJuJtTVE2v7B9ehfM7jNT44CBFaPWicvBwYyUKBS6` ç”¨äºaura.
- `Ed25519`ï¼š`5FeJQsfmbbJLTH1pvehBxrZrT5kHvJFj84ZaY5LK7NU87gZS` ä¸ºgrandpa.

## åˆ›å»ºè‡ªå®šä¹‰é“¾è§„èŒƒ

ç”Ÿæˆç”¨äºåŒºå—é“¾çš„å¯†é’¥åï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›å¯†é’¥å¯¹åˆ›å»ºè‡ªå®šä¹‰é“¾è§„èŒƒï¼Œç„¶åä¸ç§°ä¸ºéªŒè¯å™¨çš„å—ä¿¡ä»»ç½‘ç»œå‚ä¸è€…å…±äº«æ‚¨çš„è‡ªå®šä¹‰é“¾è§„èŒƒã€‚

ä¸ºäº†ä½¿å…¶ä»–äººèƒ½å¤Ÿå‚ä¸æ‚¨çš„åŒºå—é“¾ç½‘ç»œï¼Œè¯·ç¡®ä¿ä»–ä»¬ç”Ÿæˆè‡ªå·±çš„å¯†é’¥ã€‚æ”¶é›†ç½‘ç»œå‚ä¸è€…çš„å¯†é’¥åï¼Œæ‚¨å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰é“¾è§„èŒƒæ¥æ›¿æ¢localé“¾è§„èŒƒã€‚

ä¸ºç®€å•èµ·è§ï¼Œæ‚¨åœ¨æœ¬æ•™ç¨‹ä¸­åˆ›å»ºçš„è‡ªå®šä¹‰é“¾è§„èŒƒæ˜¯localé“¾è§„èŒƒçš„ä¿®æ”¹ç‰ˆæœ¬ï¼Œå®ƒè¯´æ˜äº†å¦‚ä½•åˆ›å»ºåŒèŠ‚ç‚¹ç½‘ç»œã€‚å¦‚æœæ‚¨æ‹¥æœ‰æ‰€éœ€çš„å¯†é’¥ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ç›¸åŒçš„æ­¥éª¤å°†æ›´å¤šèŠ‚ç‚¹æ·»åŠ åˆ°ç½‘ç»œä¸­ã€‚

### ä¿®æ”¹æœ¬åœ°é“¾è§„èŒƒ

æ‚¨å¯ä»¥ä¿®æ”¹é¢„å®šä¹‰çš„é“¾è§„èŒƒï¼Œè€Œä¸æ˜¯ç¼–å†™ä¸€ä¸ªå…¨æ–°çš„`local`é“¾è§„èŒƒã€‚

è¦åŸºäºæœ¬åœ°è§„èŒƒåˆ›å»ºæ–°çš„é“¾è§„èŒƒï¼š

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯shellã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ `Substrate` èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. `local`å°†é“¾è§„èŒƒå¯¼å‡ºåˆ°`customSpec.json`é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å‘½åçš„æ–‡ä»¶ï¼š

```shell
./target/release/node-template build-spec --disable-default-bootnode --chain local > customSpec.json
```

å¦‚æœæ‚¨`customSpec.json`åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œæ‚¨ä¼šçœ‹åˆ°å®ƒåŒ…å«å¤šä¸ªå­—æ®µã€‚`cargo build --release`è¿™äº›å­—æ®µä¹‹ä¸€æ˜¯æ‚¨ä½¿ç”¨è¯¥å‘½ä»¤æ„å»ºçš„è¿è¡Œæ—¶çš„ `WebAssembly (Wasm)` äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ç”±äº `WebAssembly (Wasm)` äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸€ä¸ª~~å¤§ blob~~ï¼Œå› æ­¤æ‚¨å¯ä»¥é¢„è§ˆç¬¬ä¸€è¡Œå’Œæœ€åå‡ è¡Œä»¥æŸ¥çœ‹éœ€è¦æ›´æ”¹çš„å­—æ®µã€‚

4. `customSpec.json`é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤é¢„è§ˆæ–‡ä»¶ä¸­çš„å‰å‡ ä¸ªå­—æ®µï¼š

```shell
head customSpec.json
```

è¯¥å‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µã€‚ä¾‹å¦‚ï¼š

```jsone
{
 "name": "Local Testnet",
 "id": "local_testnet",
 "chainType": "Local",
 "bootNodes": [],
 "telemetryEndpoints": null,
 "protocolId": null,
 "properties": null,
 "consensusEngine": null,
 "codeSubstitutes": {},
```

`customSpec.json`é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤é¢„è§ˆæ–‡ä»¶ä¸­çš„æœ€åä¸€ä¸ªå­—æ®µï¼š

```shell
tail -n 80 customSpec.json
```

æ­¤å‘½ä»¤æ˜¾ç¤º Wasm äºŒè¿›åˆ¶å­—æ®µåé¢çš„æœ€åéƒ¨åˆ†ï¼ŒåŒ…æ‹¬è¿è¡Œæ—¶ä¸­ä½¿ç”¨çš„å‡ ä¸ªæ‰˜ç›˜çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚`sudo`å’Œ`balancesæ‰˜ç›˜ã€‚

6. `customSpec.json`åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–‡ä»¶ã€‚
7. ä¿®æ”¹è¯¥nameå­—æ®µä»¥å°†æ­¤é“¾è§„èŒƒæ ‡è¯†ä¸ºè‡ªå®šä¹‰é“¾è§„èŒƒã€‚

ä¾‹å¦‚ï¼š

```
"name": "My Custom Testnet",
```

8. ä¿®æ”¹`aura`å­—æ®µä»¥é€šè¿‡ä¸ºæ¯ä¸ªç½‘ç»œå‚ä¸è€…æ·»åŠ  `Sr25519 SS58` åœ°å€å¯†é’¥æ¥æŒ‡å®šæœ‰æƒåˆ›å»ºå—çš„èŠ‚ç‚¹ã€‚

```json
"aura": { "authorities": [
 "5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW", "5CXGP4oPXC1Je3zf5wEDkYeAqGcGXyKWSRX2Jm14GdME5Xc5"
 ]
},
```

9. ä¿®æ”¹è¯¥`grandpa`å­—æ®µä»¥é€šè¿‡ä¸ºæ¯ä¸ªç½‘ç»œå‚ä¸è€…æ·»åŠ  `Ed25519 SS58` åœ°å€å¯†é’¥æ¥æŒ‡å®šæœ‰æƒå®ŒæˆåŒºå—çš„èŠ‚ç‚¹ã€‚

```json
"grandpa": {
   "authorities": [
     [
       "5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN",
       1
     ],
     [
       "5DpdMN4bVTMy67TfMMtinQTcUmLhZBWoWarHvEYPM4jYziqm",
       1
     ]
   ]
 },
```

`authorities`è¯·æ³¨æ„ï¼Œè¯¥éƒ¨åˆ†ä¸­çš„å­—æ®µæœ‰ä¸¤ä¸ªæ•°æ®å€¼`grandpa`ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯åœ°å€é”®ã€‚ç¬¬äºŒä¸ªå€¼ç”¨äºæ”¯æŒåŠ æƒæŠ•ç¥¨ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªéªŒè¯è€…çš„æƒé‡ä¸º1ç¥¨ã€‚

10. ä¿å­˜æ›´æ”¹å¹¶å…³é—­æ–‡ä»¶ã€‚

### æ·»åŠ éªŒè¯å™¨

å¦‚æ‚¨æ‰€è§ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹`aura`å’Œ`grandpa`éƒ¨åˆ†æ¥æ·»åŠ å’Œæ›´æ”¹é“¾è§„èŒƒä¸­çš„æƒé™åœ°å€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤æŠ€æœ¯æ·»åŠ ä»»æ„æ•°é‡çš„éªŒè¯å™¨ã€‚

æ·»åŠ éªŒè¯å™¨ï¼š

- ä¿®æ”¹è¯¥`aura`éƒ¨åˆ†ä»¥åŒ…æ‹¬`Sr25519`åœ°å€ã€‚
- ä¿®æ”¹è¯¥`grandpa`éƒ¨åˆ†ä»¥åŒ…å«`Ed25519`åœ°å€å’ŒæŠ•ç¥¨æƒé‡ã€‚

ç¡®ä¿ä¸ºæ¯ä¸ªéªŒè¯å™¨ä½¿ç”¨å”¯ä¸€çš„å¯†é’¥ã€‚å¦‚æœä¸¤ä¸ªéªŒè¯å™¨å…·æœ‰ç›¸åŒçš„å¯†é’¥ï¼Œå®ƒä»¬ä¼šäº§ç”Ÿå†²çªçš„å—ã€‚

æœ‰å…³ä½¿ç”¨å¯†é’¥å¯¹å’Œç­¾åçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[å…¬é’¥åŠ å¯†](https://docs.substrate.io/reference/cryptography/#public-key-cryptography)ã€‚

## å°†é“¾è§„èŒƒè½¬æ¢ä¸ºåŸå§‹æ ¼å¼

ä½¿ç”¨éªŒè¯å™¨ä¿¡æ¯å‡†å¤‡é“¾è§„èŒƒåï¼Œå¿…é¡»å°†å…¶è½¬æ¢ä¸ºåŸå§‹è§„èŒƒæ ¼å¼æ‰èƒ½ä½¿ç”¨ã€‚åŸå§‹é“¾è§„èŒƒåŒ…å«ä¸æœªè½¬æ¢è§„èŒƒç›¸åŒçš„ä¿¡æ¯ã€‚ä½†æ˜¯ï¼ŒåŸå§‹é“¾è§„èŒƒè¿˜åŒ…å«ç¼–ç çš„å­˜å‚¨å¯†é’¥ï¼ŒèŠ‚ç‚¹ç”¨äºå¼•ç”¨å…¶æœ¬åœ°å­˜å‚¨ä¸­çš„æ•°æ®ã€‚åˆ†å‘åŸå§‹é“¾è§„èŒƒå¯ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨æ­£ç¡®çš„å­˜å‚¨å¯†é’¥å­˜å‚¨æ•°æ®ã€‚

è¦å°†é“¾è§„èŒƒè½¬æ¢ä¸ºä½¿ç”¨åŸå§‹æ ¼å¼ï¼š

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯shellã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ Substrate èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†`customSpec.json`é“¾è§„èŒƒè½¬æ¢ä¸ºå¸¦æœ‰æ–‡ä»¶åçš„åŸå§‹æ ¼å¼ï¼š`customSpecRaw.json`

```shell
./target/release/node-template build-spec --chain=customSpec.json --raw --disable-default-bootnode > customSpecRaw.json
```

## ä¸ä»–äººå…±äº«é“¾è§„èŒƒ

å¦‚æœæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªç§æœ‰åŒºå—é“¾ç½‘ç»œä»¥ä¸å…¶ä»–å‚ä¸è€…å…±äº«ï¼Œè¯·ç¡®ä¿åªæœ‰ä¸€ä¸ªäººåˆ›å»ºé“¾è§„èŒƒå¹¶ä¸`customSpecRaw.json`ç½‘ç»œä¸­çš„æ‰€æœ‰å…¶ä»–éªŒè¯è€…å…±äº«è¯¥è§„èŒƒçš„æœ€ç»ˆåŸå§‹ç‰ˆæœ¬ï¼ˆä¾‹å¦‚æ–‡ä»¶ï¼‰ã€‚

å› ä¸º Rust ç¼–è¯‘å™¨ç”Ÿæˆçš„ä¼˜åŒ–çš„ WebAssembly äºŒè¿›åˆ¶æ–‡ä»¶åœ¨ç¡®å®šæ€§ä¸Šæ— æ³•é‡ç°ï¼Œæ‰€ä»¥æ¯ä¸ªç”Ÿæˆ Wasm è¿è¡Œæ—¶çš„äººéƒ½ä¼šç”Ÿæˆç¨å¾®ä¸åŒçš„ ~~Wasm blob~~ã€‚ä¸ºäº†ç¡®ä¿ç¡®å®šæ€§ï¼ŒåŒºå—é“¾ç½‘ç»œä¸­çš„æ‰€æœ‰å‚ä¸è€…å¿…é¡»ä½¿ç”¨å®Œå…¨ç›¸åŒçš„åŸå§‹é“¾è§„èŒƒæ–‡ä»¶ã€‚æœ‰å…³æ­¤é—®é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·[å‚é˜…åœ¨æˆ‘ä»¬çš„ Rust Wasm æ„å»ºä¸­å¯»æ‰¾éç¡®å®šæ€§é”™è¯¯](https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1)ã€‚

## å‡†å¤‡å¯åŠ¨ä¸“ç”¨ç½‘ç»œ

å°†è‡ªå®šä¹‰é“¾è§„èŒƒåˆ†å‘ç»™æ‰€æœ‰ç½‘ç»œå‚ä¸è€…åï¼Œæ‚¨å°±å¯ä»¥å¯åŠ¨è‡ªå·±çš„ç§æœ‰åŒºå—é“¾äº†ã€‚è¿™äº›æ­¥éª¤ç±»ä¼¼äºæ‚¨åœ¨[å¯åŠ¨ç¬¬ä¸€ä¸ªåŒºå—é“¾èŠ‚ç‚¹](./simulate-network.md)ä¸­æ‰§è¡Œçš„æ­¥éª¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æŒ‰ç…§æœ¬æ•™ç¨‹ä¸­çš„æ­¥éª¤æ“ä½œï¼Œåˆ™å¯ä»¥å°†å¤šå°è®¡ç®—æœºæ·»åŠ åˆ°æ‚¨çš„ç½‘ç»œä¸­ã€‚

è¦ç»§ç»­ï¼Œè¯·éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

- æ‚¨å·²ç»ä¸ºè‡³å°‘ä¸¤ä¸ªæƒé™å¸æˆ·ç”Ÿæˆæˆ–æ”¶é›†äº†å¸æˆ·å¯†é’¥ã€‚
- æ‚¨å·²æ›´æ–°æ‚¨çš„è‡ªå®šä¹‰é“¾è§„èŒƒï¼Œä»¥åŒ…å«ç”¨äºå—ç”Ÿäº§ `( aura)` å’Œå—å®Œæˆ `( grandpa)` çš„å¯†é’¥ã€‚
- æ‚¨å·²å°†è‡ªå®šä¹‰é“¾è§„èŒƒè½¬æ¢ä¸ºåŸå§‹æ ¼å¼ï¼Œå¹¶å°†åŸå§‹é“¾è§„èŒƒåˆ†å‘ç»™å‚ä¸ç§æœ‰ç½‘ç»œçš„èŠ‚ç‚¹ã€‚

å¦‚æœæ‚¨å·²å®Œæˆè¿™äº›æ­¥éª¤ï¼Œæ‚¨å°±å¯ä»¥å¯åŠ¨ç§æœ‰åŒºå—é“¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹äº†ã€‚

## å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹

ä½œä¸ºç§æœ‰åŒºå—é“¾ç½‘ç»œçš„ç¬¬ä¸€ä¸ªå‚ä¸è€…ï¼Œæ‚¨è´Ÿè´£å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç§°ä¸º`bootnode`ã€‚

å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯å¤–å£³ã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ Substrate èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤ï¼Œä½¿ç”¨è‡ªå®šä¹‰é“¾è§„èŒƒå¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š

```shell
./target/release/node-template \
  --base-path /tmp/node01 \
  --chain ./customSpecRaw.json \
  --port 30333 \
  --ws-port 9945 \
  --rpc-port 9933 \
  --telemetry-url "wss://telemetry.polkadot.io/submit/ 0" \
  --validator \
  --rpc-methods Unsafe \
  --name MyNode01 \
  --password-interactive
```

è¯·æ³¨æ„æ‚¨ç”¨äºå¯åŠ¨èŠ‚ç‚¹çš„ä»¥ä¸‹å‘½ä»¤è¡Œé€‰é¡¹ï¼š

- å‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šä¸æ­¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å…³è”çš„é“¾çš„`--base-path`è‡ªå®šä¹‰ä½ç½®ã€‚
- å‘½ä»¤è¡Œ`--chain`é€‰é¡¹æŒ‡å®šè‡ªå®šä¹‰é“¾è§„èŒƒã€‚
- `--validator`å‘½ä»¤è¡Œé€‰é¡¹è¡¨æ˜è¯¥èŠ‚ç‚¹æ˜¯é“¾çš„æƒå¨ã€‚
- `--rpc-methods` Unsafeå‘½ä»¤è¡Œé€‰é¡¹å…è®¸æ‚¨ä½¿ç”¨ä¸å®‰å…¨çš„é€šä¿¡æ¨¡å¼ç»§ç»­æœ¬æ•™ç¨‹ï¼Œå› ä¸ºæ‚¨çš„åŒºå—é“¾æœªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚
- `--name`å‘½ä»¤è¡Œé€‰é¡¹ä½¿æ‚¨èƒ½å¤Ÿåœ¨é¥æµ‹ UI ä¸­ä¸ºæ‚¨çš„èŠ‚ç‚¹æä¾›ä¸€ä¸ªäººç±»å¯è¯»çš„åç§°ã€‚
  
æ­¤å‘½ä»¤è¿˜ä½¿ç”¨æ‚¨è‡ªå·±çš„å¯†é’¥è€Œä¸æ˜¯é¢„å®šä¹‰çš„å¸æˆ·æ¥å¯åŠ¨èŠ‚ç‚¹ã€‚ç”±äºæ‚¨æ²¡æœ‰ä½¿ç”¨å…·æœ‰å·²çŸ¥å¯†é’¥çš„é¢„å®šä¹‰å¸æˆ·ï¼Œå› æ­¤æ‚¨éœ€è¦åœ¨å•ç‹¬çš„æ­¥éª¤ä¸­å°†å¯†é’¥æ·»åŠ åˆ°å¯†é’¥åº“ã€‚

## æŸ¥çœ‹èŠ‚ç‚¹æ“ä½œä¿¡æ¯

æœ¬åœ°èŠ‚ç‚¹å¯åŠ¨åï¼Œç»ˆç«¯shellä¸­ä¼šæ˜¾ç¤ºæ‰€æ‰§è¡Œçš„æ“ä½œä¿¡æ¯ã€‚åœ¨è¯¥ç»ˆç«¯ä¸­ï¼ŒéªŒè¯æ‚¨æ˜¯å¦çœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š

```shell
2021-11-03 15:32:14 Substrate Node
2021-11-03 15:32:14 âœŒï¸  version 3.0.0-monthly-2021-09+1-bf52814-x86_64-macos
2021-11-03 15:32:14 â¤ï¸  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-11-03 15:32:14 ğŸ“‹ Chain specification: My Custom Testnet
2021-11-03 15:32:14 ğŸ· Node name: MyNode01
2021-11-03 15:32:14 ğŸ‘¤ Role: AUTHORITY
2021-11-03 15:32:14 ğŸ’¾ Database: RocksDb at /tmp/node01/chains/local_testnet/db
2021-11-03 15:32:14 â›“  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-11-03 15:32:15 ğŸ”¨ Initializing Genesis block/state (state: 0x2bdeâ€¦8f66, header-hash: 0x6c78â€¦37de)
2021-11-03 15:32:15 ğŸ‘´ Loading GRANDPA authority set from genesis on what appears to be first startup.
2021-11-03 15:32:15 â±  Loaded block-time = 6s from block 0x6c78abc724f83285d1487ddcb1f948a2773cb38219c4674f84c727833be737de
2021-11-03 15:32:15 Using default protocol ID "sup" because none is configured in the chain specs
2021-11-03 15:32:15 ğŸ· Local node identity is: 12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX
2021-11-03 15:32:15 ğŸ“¦ Highest known block at #0
2021-11-03 15:32:15 ã€½ï¸ Prometheus exporter started at 127.0.0.1:9615
2021-11-03 15:32:15 Listening for new connections on 127.0.0.1:9945.
2021-11-03 15:32:20 ğŸ’¤ Idle (0 peers), best: #0 (0x6c78â€¦37de), finalized #0 (0x6c78â€¦37de), â¬‡ 0 â¬† 0
```

è¯·æ³¨æ„ä»¥ä¸‹ä¿¡æ¯ï¼š

- è¾“å‡ºè¡¨æ˜æ­£åœ¨ä½¿ç”¨çš„é“¾è§„èŒƒæ˜¯æ‚¨ä½¿ç”¨`--chain`å‘½ä»¤è¡Œé€‰é¡¹åˆ›å»ºå’ŒæŒ‡å®šçš„è‡ªå®šä¹‰é“¾è§„èŒƒã€‚
- è¾“å‡ºè¡¨æ˜è¯¥èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæƒé™ï¼Œå› ä¸ºæ‚¨ä½¿ç”¨`--validator`å‘½ä»¤è¡Œé€‰é¡¹å¯åŠ¨äº†è¯¥èŠ‚ç‚¹ã€‚
- è¾“å‡ºæ˜¾ç¤ºä½¿ç”¨å—å“ˆå¸Œåˆå§‹åŒ–çš„åˆ›ä¸–å—`(state: 0x2bdeâ€¦8f66, header-hash: 0x6c78â€¦37de)`ã€‚
- è¾“å‡ºæŒ‡å®šæ‚¨çš„èŠ‚ç‚¹çš„æœ¬åœ°èŠ‚ç‚¹èº«ä»½ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒèŠ‚ç‚¹æ ‡è¯†ä¸º`12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX`ã€‚
- è¾“å‡ºæŒ‡å®šç”¨äºèŠ‚ç‚¹çš„IP åœ°å€`127.0.0.1`æ˜¯æœ¬åœ°ä¸»æœºã€‚

è¿™äº›å€¼é€‚ç”¨äºè¿™ä¸ªç‰¹å®šçš„æ•™ç¨‹ç¤ºä¾‹ã€‚è¾“å‡ºä¸­çš„å€¼å°†ç‰¹å®šäºæ‚¨çš„èŠ‚ç‚¹ï¼Œæ‚¨å¿…é¡»å°†èŠ‚ç‚¹çš„å€¼æä¾›ç»™å…¶ä»–ç½‘ç»œå‚ä¸è€…ä»¥è¿æ¥åˆ°å¼•å¯¼èŠ‚ç‚¹ã€‚

ç°åœ¨æ‚¨å·²ç»ä½¿ç”¨è‡ªå·±çš„å¯†é’¥æˆåŠŸå¯åŠ¨äº†éªŒè¯å™¨èŠ‚ç‚¹å¹¶è®°ä¸‹äº†èŠ‚ç‚¹èº«ä»½ï¼Œæ‚¨å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ä½†æ˜¯ï¼Œåœ¨å°†å¯†é’¥æ·»åŠ åˆ°å¯†é’¥åº“ä¹‹å‰ï¼Œè¯·æŒ‰ `Control-c` åœæ­¢èŠ‚ç‚¹ã€‚

## å°†å¯†é’¥æ·»åŠ åˆ°å¯†é’¥åº“
å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹åï¼Œå°šæœªç”Ÿæˆä»»ä½•å—ã€‚ä¸‹ä¸€æ­¥æ˜¯å°†ä¸¤ç§ç±»å‹çš„å¯†é’¥æ·»åŠ åˆ°ç½‘ç»œä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å¯†é’¥åº“ä¸­ã€‚

å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼š

- æ·»åŠ `aura`æƒé™å¯†é’¥ä»¥å¯ç”¨[å—ç”Ÿäº§](https://docs.substrate.io/reference/glossary/#author)ã€‚
- æ·»åŠ `grandpa`æƒé™å¯†é’¥ä»¥å¯ç”¨[å—å®Œæˆ](https://docs.substrate.io/reference/glossary/#finality)ã€‚
æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å°†å¯†é’¥æ’å…¥å¯†é’¥åº“ã€‚å¯¹äºæœ¬æ•™ç¨‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨keyå­å‘½ä»¤æ’å…¥æœ¬åœ°ç”Ÿæˆçš„å¯†é’¥ã€‚

è¦å°†å¯†é’¥æ’å…¥å¯†é’¥åº“ï¼š

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯å¤–å£³ã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ Substrate èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤æ’å…¥`aura`ä»å­å‘½ä»¤ç”Ÿæˆçš„å¯†é’¥ï¼š`key`
   
```shell
./target/release/node-template key insert --base-path /tmp/node01 \
  --chain customSpecRaw.json \
  --scheme Sr25519 \
  --suri <your-secret-seed> \
  --password-interactive \
  --key-type aura
```
æ›¿æ¢ä¸ºæ‚¨åœ¨ä½¿ç”¨[èŠ‚ç‚¹æ¨¡æ¿ç”Ÿæˆæœ¬åœ°å¯†é’¥](https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-local-keys-using-the-node-template)`<your-secret-seed>`ä¸­ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªå¯†é’¥å¯¹çš„å¯†é’¥çŸ­è¯­æˆ–å¯†é’¥ç§å­ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œç§˜å¯†çŸ­è¯­æ˜¯`pig giraffe ceiling enter weird liar orange decline behind total despair fly`ï¼Œå› æ­¤`--suri`å‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šå°†å¯†é’¥æ’å…¥å¯†é’¥åº“çš„å­—ç¬¦ä¸²ã€‚

ä¾‹å¦‚ï¼š

`--suri "pig giraffe ceiling enter weird liar orange decline behind total despair fly"`

æ‚¨è¿˜å¯ä»¥ä»æŒ‡å®šçš„æ–‡ä»¶ä½ç½®æ’å…¥å¯†é’¥ã€‚æœ‰å…³å¯ç”¨å‘½ä»¤è¡Œé€‰é¡¹çš„ä¿¡æ¯ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
./target/release/node-template key insert --help
```

4. é”®å…¥ç”¨äºç”Ÿæˆå¯†é’¥çš„å¯†ç ã€‚
5. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤æ’å…¥`grandpa`ä»å­å‘½ä»¤ç”Ÿæˆçš„å¯†é’¥ï¼š`key`

```shell
./target/release/node-template key insert \
  --base-path /tmp/node01 \
  --chain customSpecRaw.json \
  --scheme Ed25519 \
  --suri <your-secret-key> \
  --password-interactive \
  --key-type gran
```

æ›¿æ¢ä¸ºæ‚¨åœ¨ä½¿ç”¨[èŠ‚ç‚¹æ¨¡æ¿ç”Ÿæˆæœ¬åœ°å¯†é’¥](https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-local-keys-using-the-node-template)`<your-secret-seed>`ä¸­ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªå¯†é’¥å¯¹çš„å¯†é’¥çŸ­è¯­æˆ–å¯†é’¥ç§å­ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œç§˜å¯†çŸ­è¯­æ˜¯`pig giraffe ceiling enter weird liar orange decline behind total despair fly`ï¼Œå› æ­¤`--suri`å‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šå°†å¯†é’¥æ’å…¥å¯†é’¥åº“çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š

```shell
--suri "pig giraffe ceiling enter weird liar orange decline behind total despair fly"
```

6. é”®å…¥ç”¨äºç”Ÿæˆå¯†é’¥çš„å¯†ç ã€‚
7. `node01`é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æ‚¨çš„å¯†é’¥æ˜¯å¦åœ¨å¯†é’¥åº“ä¸­ï¼š

```shell
ls /tmp/node01/chains/local_testnet/keystore
```

è¯¥å‘½ä»¤æ˜¾ç¤ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š

```shell
617572611441ddcb22724420b87ee295c6d47c5adff0ce598c87d3c749b776ba9a647f04
6772616e1441ddcb22724420b87ee295c6d47c5adff0ce598c87d3c749b776ba9a647f04
```

å°†å¯†é’¥æ·»åŠ åˆ° `/tmp/node01` ä¸‹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å¯†é’¥åº“åï¼Œå¯ä»¥ä½¿ç”¨ä¹‹å‰åœ¨[å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸­ä½¿ç”¨çš„å‘½ä»¤é‡æ–°å¯åŠ¨èŠ‚ç‚¹](https://docs.substrate.io/tutorials/get-started/trusted-network/#start-the-first-node)ã€‚

## å…è®¸å…¶ä»–å‚ä¸è€…åŠ å…¥

æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨`--bootnodes`å’Œ`--validator`å‘½ä»¤è¡Œé€‰é¡¹å…è®¸å…¶ä»–éªŒè¯è€…åŠ å…¥ç½‘ç»œã€‚

å°†ç¬¬äºŒä¸ªéªŒè¯å™¨æ·»åŠ åˆ°ä¸“ç”¨ç½‘ç»œï¼š

1. åœ¨ç¬¬äºŒå°è®¡ç®—æœºä¸Šæ‰“å¼€ç»ˆç«¯å¤–å£³ã€‚
2. åˆ‡æ¢åˆ°ç¼–è¯‘ Substrate èŠ‚ç‚¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚
3. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤å¯åŠ¨ç¬¬äºŒä¸ªåŒºå—é“¾èŠ‚ç‚¹ï¼š

```shell
./target/release/node-template \
  --base-path /tmp/node02 \
  --chain ./customSpecRaw.json \
  --port 30334 \
  --ws-port 9946 \
  --rpc-port 9934 \
  --telemetry-url "wss://telemetry.polkadot.io/submit/ 0" \
  --validator \
  --rpc-methods Unsafe \
  --name MyNode02 \
  --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX \
  --password-interactive
```

æ­¤å‘½ä»¤ä½¿ç”¨`base-path`å’Œå‘½ä»¤`name`è¡Œ`validator`é€‰é¡¹å°†æ­¤èŠ‚ç‚¹æ ‡è¯†ä¸ºä¸“ç”¨ç½‘ç»œçš„ç¬¬äºŒä¸ªéªŒè¯å™¨ã€‚`--chain`å‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šè¦ä½¿ç”¨çš„é“¾è§„èŒƒæ–‡ä»¶ã€‚å¯¹äºç½‘ç»œä¸­çš„æ‰€æœ‰éªŒè¯å™¨ï¼Œæ­¤æ–‡ä»¶å¿…é¡»ç›¸åŒã€‚è¯·åŠ¡å¿…ä¸º`--bootnodes`å‘½ä»¤è¡Œé€‰é¡¹è®¾ç½®æ­£ç¡®çš„ä¿¡æ¯ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¯·ç¡®ä¿æ‚¨å·²ä»ç½‘ç»œä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å®šæœ¬åœ°èŠ‚ç‚¹æ ‡è¯†ç¬¦ã€‚å¦‚æœæ‚¨æ²¡æœ‰è®¾ç½®æ­£ç¡®çš„bootnodeæ ‡è¯†ç¬¦ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼š

```shell
The bootnode you want to connect to at ... provided a different peer ID than the one you expect: ...
```

4. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤æ·»åŠ `aura`ä»å­å‘½ä»¤ç”Ÿæˆçš„å¯†é’¥ï¼š`key`

```shell
./target/release/node-template key insert --base-path /tmp/node02 \
  --chain customSpecRaw.json \
  --scheme Sr25519 \
  --suri <second-participant-secret-seed> \
  --password-interactive \
  --key-type aura
```

æ›¿æ¢ä¸ºæ‚¨åœ¨[ç”Ÿæˆç¬¬äºŒä¸ªå¯†é’¥å¯¹](https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys)`<second-participant-secret-seed>`ä¸­ç”Ÿæˆçš„å¯†ç çŸ­è¯­æˆ–å¯†ç ç§å­ã€‚å¯ç”¨åŒºå—ç”Ÿäº§éœ€è¦å¯†é’¥ç±»å‹ã€‚`aura`

5. é”®å…¥ç”¨äºç”Ÿæˆå¯†é’¥çš„å¯†ç ã€‚
6. é€šè¿‡è¿è¡Œç±»ä¼¼äºä»¥ä¸‹çš„å‘½ä»¤ï¼Œ`grandpa`å°†ä»å­å‘½ä»¤ç”Ÿæˆçš„å¯†é’¥æ·»åŠ åˆ°æœ¬åœ°å¯†é’¥åº“ï¼š`key`

```shell
./target/release/node-template key insert --base-path /tmp/node02 \
  --chain customSpecRaw.json \
  --scheme Ed25519 --suri <second-participant-secret-seed> \
  --password-interactive \
  --key-type gran
```

æ›¿æ¢ä¸ºæ‚¨åœ¨[ç”Ÿæˆç¬¬äºŒä¸ªå¯†é’¥å¯¹](https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys)`<second-participant-secret-seed>`ä¸­ç”Ÿæˆçš„å¯†ç çŸ­è¯­æˆ–å¯†ç ç§å­ã€‚å¯ç”¨å—æœ€ç»ˆç¡®å®šéœ€è¦å¯†é’¥ç±»å‹ã€‚`gran`

åŒºå—æœ€ç»ˆç¡®å®šéœ€è¦è‡³å°‘ä¸‰åˆ†ä¹‹äºŒçš„éªŒè¯è€…å°†ä»–ä»¬çš„å¯†é’¥æ·»åŠ åˆ°å„è‡ªçš„å¯†é’¥åº“ä¸­ã€‚å› ä¸ºè¿™ä¸ªç½‘ç»œåœ¨é“¾è§„èŒƒä¸­é…ç½®äº†ä¸¤ä¸ªéªŒè¯å™¨ï¼Œæ‰€ä»¥åªæœ‰åœ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹æ·»åŠ äº†å®ƒçš„å¯†é’¥ä¹‹åæ‰èƒ½å¼€å§‹åŒºå—ç»ˆç»“ã€‚

7. é”®å…¥ç”¨äºç”Ÿæˆå¯†é’¥çš„å¯†ç ã€‚
8. `node02`é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æ‚¨çš„å¯†é’¥æ˜¯å¦åœ¨å¯†é’¥åº“ä¸­ï¼š

```shell
ls /tmp/node02/chains/local_testnet/keystore
```

è¯¥å‘½ä»¤æ˜¾ç¤ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š

```shell
617572611a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
6772616e1a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
```

Substrate èŠ‚ç‚¹åœ¨æ’å…¥grandpaå¯†é’¥åéœ€è¦é‡æ–°å¯åŠ¨ï¼Œå› æ­¤æ‚¨å¿…é¡»åœ¨çœ‹åˆ°åŒºå—å®Œæˆä¹‹å‰å…³é—­å¹¶é‡æ–°å¯åŠ¨èŠ‚ç‚¹ã€‚

9. æŒ‰ Control-c å…³é—­èŠ‚ç‚¹ã€‚
10. é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°å¯åŠ¨ç¬¬äºŒä¸ªåŒºå—é“¾èŠ‚ç‚¹ï¼š

```shell
./target/release/node-template \
  --base-path /tmp/node02 \
  --chain ./customSpecRaw.json \
  --port 30334 \
  --ws-port 9946 \
  --rpc-port 9934 \
  --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
  --validator \
  --rpc-methods Unsafe \
  --name MyNode02 \
  --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX \
  --password-interactive
```

åœ¨ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å°†å…¶å¯†é’¥æ·»åŠ åˆ°å„è‡ªçš„å¯†é’¥åº“ï¼ˆä½äº å’Œ ä¸‹ï¼‰`/tmp/node01`å¹¶`/tmp/node02`é‡æ–°å¯åŠ¨åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç›¸åŒçš„åˆ›ä¸–å—å’ŒçŠ¶æ€æ ¹å“ˆå¸Œã€‚

æ‚¨è¿˜åº”è¯¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå¯¹ç­‰èŠ‚ç‚¹ï¼ˆ`1 peers`ï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬äº§ç”Ÿäº†ä¸€ä¸ªåŒºå—æè®®ï¼ˆ`best: #2 (0xe111â€¦c084)`ï¼‰ã€‚å‡ ç§’é’Ÿåï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šçš„æ–°å—éƒ½å·²å®Œæˆã€‚

## ä¸‹ä¸€æ­¥

æ‚¨ç°åœ¨å·²ç»äº†è§£äº†å¦‚ä½•ä¸å—ä¿¡ä»»çš„å‚ä¸è€…ä¸€èµ·å¯åŠ¨ç§æœ‰åŒºå—é“¾ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å­¦ä¹ äº†ï¼š

- å¦‚ä½•å¯åŠ¨å’Œåœæ­¢å¯¹ç­‰åŒºå—é“¾èŠ‚ç‚¹
- å¦‚ä½•ç”Ÿæˆè‡ªå·±çš„å¯†é’¥å¯¹
- å¦‚ä½•åˆ›å»ºä½¿ç”¨æ‚¨ç”Ÿæˆçš„å¯†é’¥çš„è‡ªå®šä¹‰é“¾è§„èŒƒ
- å¦‚ä½•å°†éªŒè¯å™¨æ·»åŠ åˆ°ä½¿ç”¨æ‚¨çš„è‡ªå®šä¹‰é“¾è§„èŒƒçš„ä¸“ç”¨ç½‘ç»œ

è¦äº†è§£æœ‰å…³æœ¬æ•™ç¨‹ä¸­ä»‹ç»çš„ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä»¥ä¸‹éƒ¨åˆ†ï¼š

- å¸æˆ·ã€åœ°å€å’Œå¯†é’¥
- é“¾æ¡è§„æ ¼
- è†æˆ‘
- å¯†ç å­¦
