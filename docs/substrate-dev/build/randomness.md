# 随机性

随机性在计算机科学及其他领域有许多应用。例如，它用于在某些治理系统中选择议员、执行统计或科学分析、执行加密操作以及游戏和赌博。许多需要随机性的应用程序已经在区块链网络上找到了归宿。本文描述了如何在 Substrate 运行时中产生和使用随机性。

确定性随机性
在传统的非区块链计算中，需要随机性的应用程序可以选择使用从硬件中提取的真实随机值，或实际上具有确定性但由于密码学而无法预测的伪随机值。

在区块链上运行的应用程序受到更严格的限制，因为网络中的所有机构都必须就任何链上价值达成一致，包括任何注入的随机数据。由于这个限制，直接使用真正的随机性是不可能的。

幸运的是，加密原语（如可验证随机函数）的进步和多方随机性计算的发展允许需要随机性的应用程序仍然在区块链中使用。

基板的随机性特征
Substrate 提供了一个称为 trait 的特性Randomness，它编码了生成随机性的逻辑和使用它的逻辑之间的接口。此特性允许两个逻辑片段彼此独立编写。

消耗随机性
正在编写需要随机性的托盘的开发人员不需要担心提供这种随机性。相反，托盘可以简单地需要一个实现特征的随机源。RandomnessTrait 提供了两种获得随机性的方法。

第一种方法称为random_seed。它不接受任何参数并返回一个原始的随机性。在一个块中多次调用此方法将每次返回相同的值。因此，不建议直接使用此方法。

第二种方法称为random。它采用一个字节数组，用作上下文标识符，并返回一个对该上下文唯一的结果，并且在底层随机源允许的情况下独立于其他上下文。

产生随机性
有许多不同的方式来实现Randomnesstrait，每一种方式都代表了性能、复杂性和安全性之间的不同权衡。Substrate 带有两种实现，如果开发人员想要做出不同的权衡，他们可以提供自己的实现。

Substrate 提供的第一个实现是Randomness Collective Flip Pallet。该托盘基于集体抛硬币。它非常高效，但不是很安全。此托盘应仅在测试消耗随机性的托盘时使用，而不是在生产中使用。

第二种实现是BABE 托盘，它使用可验证的随机函数。该托盘提供生产级随机性，并用于 Polkadot。选择此随机源表明您的区块链使用 Babe 共识。

安全属性
该Randomness特征为 Substrate 运行时中的随机源提供了方便且有用的抽象。但是 trait 本身并没有做出任何安全保证。运行时开发人员必须确保使用的随机源满足所有消耗其随机性的托盘的安全要求。

下一步去哪里
操作方法：随机性
Randomness